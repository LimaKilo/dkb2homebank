dkb2homebank ![Python application](https://github.com/hamvocke/dkb2homebank/workflows/Python%20application/badge.svg)
============

This script converts CSV account reports from [Deutsche Kreditbank (DKB)](https://www.dkb.de) to a
CSV format that can be imported by the personal finance software
[Homebank](http://homebank.free.fr/).

You can find further instructions on [my blog](http://www.hamvocke.com/blog/import-dkb-accounts-into-homebank/).

How to run the script
---------------------

The script can convert several kinds of CSV export formats you want to convert. Currently supported are:

* DKB Cash (as of the legacy web portal)
* DKB Visa (as of the legacy web portal)
* DKB Giro (as of the new web portal introduced in 2023)
* DKB Visa (as of the new web portal introduced in 2023)
* DKB Tagesgeld (as of the new web portal introduced in 2023)

I recommend generating CSV files via the new web portal.

To convert a _DKB Cash_ file run:
    
    ./dkb2homebank.py --cash yourCashReportFile.csv

To convert a _Visa_ file run:
    
    ./dkb2homebank.py --visa yourVisaReportFile.csv
    
To convert a _Giro_ file (that's the new format introduced with the 2023 web portal overhaul) run:
    
    ./dkb2homebank.py --visa yourGiroReportFile.csv
    
You can also choose an alternative path for your output file, if the standard in the working directory doesn't do it for you. Use `--output-file` or `-o` for that:
 
    ./dkb2homebank.py --cash yourCashReportFile.csv --output-file ~/Documents/Finances/import_to_homebank.csv


Importing into Homebank
-----------------------
Import the converted CSV file into Homebank by going to `File -> Import` and selecting the _output_ file you got when running your script.

**Note**: If Homebank tells you that your CSV file is invalid, go to `Settings -> Import/Export` and make sure that the `Delimiter` is set to `semicolon` and try importing again.

Requirements
------------
To run this script, you need Python 3.4 or higher. I've verified that the exported CSV can be imported successfully on Homebank *5.0.0* and above.

Run the tests
-------------
I have included a (admittedly very small) set of tests to help a little bit during development.
These tests use Python's _unittest_ module and can be executed using:
    
    ./dkb2homebankTest.py

You can also test the script manually by using the provided testfiles:

    ./dkb2homebank.py testfiles/cash.csv
    ./dkb2homebank.py testfiles/visa.csv
    ./dkb2homebank.py testfiles/giro.csv
    ./dkb2homebank.py testfiles/visaNew.csv

Changelog
---------
This script isn't maintained with a lot of engineering rigor.
There's no proper versioning or backwards compatibility since, quite frankly, I can't be bothered.

I'm trying to log (breaking) changes below, so that you lovely folks out there have a chance of grokking what's going on.


## 2023-11-01 ([`841c83b`](https://github.com/hamvocke/dkb2homebank/commit/841c83bb2dde71097afd540d798324165965f288))

### New
* Proper support of "Visa" account CSVs generated by the new (as of 2023) web portal
* Bring back auto-detection of CSV files

### Breaking
* Kill old "file type" flags. This script no longer accepts `--cash` or `--visa` or `--giro` flags. Instead, we auto-detect the CSV file format every time. Simply removing the `--cash` (or equivalent) flags from your command line call should do the trick.

### Tweaks
* `--debug` flag is now a proper boolean "flag"
